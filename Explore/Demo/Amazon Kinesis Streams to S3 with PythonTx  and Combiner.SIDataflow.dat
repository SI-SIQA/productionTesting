{"parentId":"gDmUWy2Dbs0dGecSpDq8Wq","version":8,"blob":"{\"agentId\":\"010SZL2500000000000C\",\"nodes\":[{\"id\":\"d650fed7-bcb1-4add-9d29-309a350f899b\",\"description\":null,\"name\":\"Amazon Kinesis Streams to S3 with PythonTx  and Combiner_source\",\"createdAt\":null,\"modifiedAt\":null,\"createdBy\":null,\"serviceType\":\"source\",\"config\":[{\"key\":\"_nativeName\",\"value\":\"Alok_test\"}],\"connectionId\":\"010SZL0B00000000003B\"},{\"id\":\"bc814175-5a71-4816-a267-d3706d293841\",\"description\":null,\"name\":\"pythontx1\",\"createdAt\":null,\"modifiedAt\":null,\"createdBy\":null,\"serviceType\":\"transformation\",\"config\":[{\"key\":\"scriptPath\",\"value\":\"\"},{\"key\":\"transformationName\",\"value\":\"pythontx1\"},{\"key\":\"messageFormat\",\"value\":\"JSON\"},{\"key\":\"scriptBody\",\"value\":\"import csv\\nimport re\\npattern='^.*CUST_ID:([0-9]*),.*'\\ncustomer_id = re.search(pattern, inputData).group(1)\\noutputData=\\\"\\\"\\nwith open('/root/r33Patch/infaagent/customerIdPhoneNum.csv') as csv_file:\\n    csv_reader = csv.reader(csv_file, delimiter=',')\\n    line_count = 0\\n    for row in csv_reader:\\n        if row[0]==customer_id:\\n            outputData=inputData+\\\",Phone_Number:\\\"+row[1]\\n            break\"},{\"key\":\"name\",\"value\":\"python\"},{\"key\":\"pythonPath\",\"value\":\"/export/home/abhrac/Python3NP114\"},{\"key\":\"typeSelect\",\"value\":\"scriptBody\"}],\"connectionId\":null},{\"id\":\"6f7ec918-b470-425f-b55e-be7f4a127a4f\",\"description\":null,\"name\":\"Combiner_tx\",\"createdAt\":null,\"modifiedAt\":null,\"createdBy\":null,\"serviceType\":\"transformation\",\"config\":[{\"key\":\"timeLimit\",\"value\":null},{\"key\":\"transformationName\",\"value\":\"Combiner_tx\"},{\"key\":\"messageFormat\",\"value\":\"JSON\"},{\"key\":\"maxAggSize\",\"value\":null},{\"key\":\"minRecords\",\"value\":\"100\"},{\"key\":\"name\",\"value\":\"combiner\"}],\"connectionId\":null},{\"id\":\"a594762e-118d-43c2-aa94-1ba4d76610fa\",\"description\":null,\"name\":\"Amazon Kinesis Streams to S3 with PythonTx  and Combiner_target\",\"createdAt\":null,\"modifiedAt\":null,\"createdBy\":null,\"serviceType\":\"target\",\"config\":[{\"key\":\"_nativeName\",\"value\":\"Store.txt\"},{\"key\":\"minUploadPartSize\",\"value\":\"5120\"},{\"key\":\"multipartUploadThreshold\",\"value\":\"5120\"}],\"connectionId\":\"010SZL0B000000000022\"}],\"edges\":[{\"id\":\"5b92d58e-e630-4152-9a23-805e2e075982\",\"description\":null,\"name\":\"edge0\",\"from\":\"Amazon Kinesis Streams to S3 with PythonTx  and Combiner_source\",\"to\":\"pythontx1\",\"createdAt\":null,\"modifiedAt\":null,\"createdBy\":null},{\"id\":\"5850844f-063d-4777-8a06-350709265c53\",\"description\":null,\"name\":\"edge1\",\"from\":\"pythontx1\",\"to\":\"Combiner_tx\",\"createdAt\":null,\"modifiedAt\":null,\"createdBy\":null},{\"id\":\"353ea4b4-a181-4b8d-93c0-9d72b4071ec0\",\"description\":null,\"name\":\"edge2\",\"from\":\"Combiner_tx\",\"to\":\"Amazon Kinesis Streams to S3 with PythonTx  and Combiner_target\",\"createdAt\":null,\"modifiedAt\":null,\"createdBy\":null}],\"runtimeOptions\":{\"errorTolerance\":null,\"retryTolerance\":null,\"rejectDir\":null,\"email\":null,\"maxLogSize\":{\"value\":10,\"unit\":\"MB\"}}}","description":"Amazon Kinesis Streams  to ADLS gen 2 with Python transformation.\nUsing python tx:\nPerform lookup on the local file as csv (will have customer id and phone no). \nAppend phone no to the message and write to ADLS gen2 target.","customAttributes":{"agentId":"010SZL2500000000000C","messageFormat":"JSON","currentVersion":"7"}}